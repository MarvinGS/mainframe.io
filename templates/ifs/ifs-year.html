{% extends "base.html" %}
{% import "macros.html" as macros %}


{% block extra_meta %}
<meta property="og:type" content="article"/>

{% set all_section = get_section(path="images/ifs/all/_index.md") %}

{% set latest_page = all_section.pages | first %}
{% if latest_page %}
{% set latest_page_data = get_page(path=latest_page.relative_path) %}

{{
macros::sd_article(
title=section.title,
image_url=config.extra.resource_base ~ "/media/img/mainframe-logo.svg",
created="2012-01-01T23:42",
updated=latest_page_data.date,
author=config.author,
description=section.description
)
}}

{{
macros::og_article(
author=config.author,
section="Images From Space",
created="2012-01-01T23:42",
updated=latest_page_data.date
)
}}
{% endif %}

{% endblock extra_meta %}

{% block content %}
{% set all_section = get_section(path="images/ifs/all/_index.md") %}

<h4>
    {{ section.title }}
</h4>

<div class="image-gallery">
    {% for subsection in all_section.subsections | reverse %}
    {% set subsection_data = get_section(path=subsection) %}
    {% set latest_page = subsection_data.pages | first %}

    {% set scaling = 200 / latest_page.extra.height %}
    {% set height = 200 %}
    {% set width = latest_page.extra.width * scaling %}

    <a href="{{subsection_data.path}}"
       class="text-decoration-none rounded-1 p-0 overflow-hidden border border-1"
       style="height: {{height}}px; width: {{width}}px;">
        <img alt="{{ latest_page.title }}"
             loading="lazy"
             class="p-0 m-0"
             decoding="async"
             src="{{ config.extra.ifs_base_path }}/.thumbs/750-{{ latest_page.extra.image_filename }}"/>
        <h3 class="float-start m-0 py-1 px-2 d-inline-flex text-white border-0 position-relative"
            style="background-color: rgba(var(--bs-secondary-bg-rgb), 0.75); top: -50%; left: 50%; z-index: 100; transform: translateX(-50%) translateY(-50%);">
            {{subsection_data.extra.year}}
        </h3>
    </a>
    {% endfor %}
</div>

{% endblock content %}