{% extends "base.html" %}
{% import "macros.html" as macros %}

{% block extra_meta %}
<meta property="og:type" content="article" />

{% if paginator %}
{% set page_list = paginator.pages %}
{% else %}
{% set page_list = section.pages %}
{% endif %}

{% if page_list | length > 0 %}

{{
macros::sd_article(
title=section.title,
image_url=config.extra.resource_base ~ "/media/img/mainframe-logo.svg",
created="2012-01-01T23:42",
updated=page_list[0].date,
author=config.author,
description=section.description | default(value="")
)
}}

{{
macros::og_article(
author=config.author, 
section="Images From Space",
created="2012-01-01T23:42", 
updated=page_list[0].date)
}}

{% for page in page_list %}

{{
self::sd_image(
image_url=config.extra.ifs_base_path ~ "/" ~ page.extra.image_filename,
author=config.author,
title=page.title
)
}}

{% endfor %}

{% endif %}
{% endblock extra_meta %}

{% block main %}

<h4 class="d-flex justify-content-between">
    {{ section.title }}
    <!--{# TODO: BETTER BUTTON PLACEMENT #}-->
    <!--{# TODO: TOTAL AMOUNT #}-->
    <a class="btn btn-secondary btn-sm" href="{{ section.path ~ '..' }}">{{trans(key="all", lang=lang)}}</a>
</h4>

{% include "ifs/ifs-pagination.html" %}

<div class="image-gallery">
    {% if paginator %}
    {% set page_list = paginator.pages %}
    {% else %}
    {% set page_list = section.pages %}
    {% endif %}

    {% for page in page_list %}
    
    {% set scaling = 200 / page.extra.height %}
    {% set height = 200 %}
    {% set width = page.extra.width * scaling %}
    
    <a href="{{page.path}}" style="height: {{height}}px; width: {{width}}px;">
        <img alt=""
             loading="lazy"
             decoding="async"
             src="{{config.extra.ifs_base_path}}/.thumbs/750-{{page.extra.image_filename}}"/>
    </a>
    
    {% endfor %}
</div>

{% include "ifs/ifs-pagination.html" %}

{% endblock main %}
