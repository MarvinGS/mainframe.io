{% macro ifs_metadata(image_filename, width, height, title, preview_size=750) %}

{% set scaling = preview_size / height %}
{% set scaled_height = preview_size | round(precision=2) %}
{% set scaled_width = (width * scaling) | round(precision=2) %}
{% set image_url = config.extra.ifs_base_path ~ "/.thumbs/" ~ preview_size ~ "-" ~ image_filename %}

<meta property="og:type" content="article" />

<meta property="og:image" content="{{ image_url | safe }}" />
<meta property="og:image:secure_url" content="{{ image_url | safe }}" />
<meta property="twitter:image" content="{{ image_url }}" />

<meta property="og:image:type" content="image/jpeg" />
<meta property="twitter:image:type" content="image/jpeg" />

<meta property="og:image:width" content="{{ scaled_width }}" />
<meta property="twitter:image:width" content="{{ scaled_width }}" />
<meta property="og:image:height" content="{{ scaled_height }}" />
<meta property="twitter:image:height" content="{{ scaled_height }}" />

<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:site" content="{{ config.author }}" />
<meta property="twitter:creator" content="{{ config.author }}" />

<meta property="og:image:alt" content="{{ title }}" />
<meta property="twitter:title" content="{{ title }}" />

<script type="application/ld+json">
    {
        "@context": "https://schema.org/",
        "@type": "ImageObject",
        "contentUrl": "{{ image_url | safe }}",
        "license": "https://creativecommons.org/licenses/by-sa/4.0/",
        "acquireLicensePage": "https://creativecommons.org/licenses/by-sa/4.0/",
        "creditText": "{{ title }}",
        "creator": {
            "@type": "Person",
            "name": "{{ config.author }}",
            "url": "https://mainframe.io"
        },
        "copyrightNotice": "{{ config.author }}"
    }
</script>

{% endmacro %}