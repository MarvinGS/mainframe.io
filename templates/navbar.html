<header id="navbar" style="padding-top: 10px;" class="row">
    <div class="col">
        <nav class="navbar navbar-expand-md bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand" href="/{% if lang != config.default_language %}{{lang}}{% endif %}"
                   style="padding-top: 10px; padding-bottom: 10px;">
                    <img style="height: 28px;" id="img-logo-mainframe" src="/media/img/logo-mainframe.svg"
                         alt="Mainframe Logo">
                    <img style="height: 50px;" id="img-logo-ktt" src="/media/img/logo-ktt.png"
                         alt="KreativitÃ¤t trifft Technik e.V. Logo">
                </a>

                <button class="navbar-toggler" type="button">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        {% for subsectionPath in all_sections.subsections %}
                        {% set subsection = get_section(path=subsectionPath) %}

                        <li class="nav-item dropdown">
                            <div class="nav-link dropdown-toggle" role="button" aria-expanded="false">
                                {{ subsection.title }}
                            </div>
                            <ul class="dropdown-menu">
                                {% for page in subsection.pages %}
                                <li>
                                    <a class="dropdown-item" href="{{page.path}}">
                                        {{page.title}}
                                    </a>
                                </li>
                                {% endfor %}

                                {% for subsubsectionPath in subsection.subsections %}
                                {% set subsubsection = get_section(path=subsubsectionPath) %}
                                <li>
                                    <a class="dropdown-item" href="{{subsubsection.path}}">
                                        {{subsubsection.title}}
                                    </a>
                                </li>
                                {% endfor %}
                            </ul>
                        </li>
                        {% endfor %}
                    </ul>

                    <ul class="navbar-nav navbar-right">
                        {% if lang != config.default_language %}
                        {% set start = 1 %}
                        {% else %}
                        {% set start = 0 %}
                        {% endif %}

                        {% if page %}
                        {% set raw_path = page.components | slice(start=start) | join(sep="/") %}
                        {% elif section %}
                        {% set raw_path = section.components | slice(start=start) | join(sep="/") %}
                        {% else %}
                        {% set raw_path = "" %}
                        {% endif %}

                        {% set language = trans(key="language",lang=lang) %}

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                               aria-expanded="false">
                                <img id="img-icon-lang"
                                     src=""
                                     style="height: 28px;"
                                     alt="{{ language }}">
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a class="dropdown-item" href="/{{raw_path}}">
                                        <img src="/media/img/lang/de.png" class="me-1">
                                        Deutsch
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="/en/{{raw_path}}">
                                        <img src="/media/img/lang/en.png" class="me-1">
                                        Englisch
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</header>
